import React, { useRef, useEffect } from 'react';
import './Slider.css'; // Make sure to include your styles

const Slider = () => {
  const sliderRef = useRef(null);
  const sliderListRef = useRef(null);
  const thumbnailRef = useRef(null);

  useEffect(() => {
    const thumbnail = thumbnailRef.current;
    const firstItem = thumbnail.querySelector('.item');
    if (firstItem) {
      thumbnail.appendChild(firstItem);
    }
  }, []);

  const moveSlider = (direction) => {
    const slider = sliderRef.current;
    const sliderList = sliderListRef.current;
    const thumbnail = thumbnailRef.current;

    const sliderItems = sliderList.querySelectorAll('.item');
    const thumbnailItems = thumbnail.querySelectorAll('.item');

    if (direction === 'next') {
      sliderList.appendChild(sliderItems[0]);
      thumbnail.appendChild(thumbnailItems[0]);
      slider.classList.add('next');
    } else {
      sliderList.prepend(sliderItems[sliderItems.length - 1]);
      thumbnail.prepend(thumbnailItems[thumbnailItems.length - 1]);
      slider.classList.add('prev');
    }

    const handleAnimationEnd = () => {
      slider.classList.remove('next', 'prev');
      slider.removeEventListener('animationend', handleAnimationEnd);
    };

    slider.addEventListener('animationend', handleAnimationEnd);
  };

  return (
    <div className="slider" ref={sliderRef}>
      <div className="controls">
        <button className="prev" onClick={() => moveSlider('prev')}>Prev</button>
        <button className="next" onClick={() => moveSlider('next')}>Next</button>
      </div>
      <div className="slider list" ref={sliderListRef}>
        {/* Replace with dynamic items */}
        <div className="item">Slide 1</div>
        <div className="item">Slide 2</div>
        <div className="item">Slide 3</div>
      </div>
      <div className="slider thumbnail" ref={thumbnailRef}>
        {/* Replace with dynamic thumbnails */}
        <div className="item">Thumb 1</div>
        <div className="item">Thumb 2</div>
        <div className="item">Thumb 3</div>
      </div>
    </div>
  );
};

export default Slider;
